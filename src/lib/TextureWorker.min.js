var TextureWorker;LIBRARY({name:"TextureWorker",version:7,shared:!1,api:"CoreEngine"}),function(e){function r(r){e.debugMode=r}function a(e,r){var a=android.graphics.Bitmap.createBitmap(e.getWidth(),e.getHeight(),android.graphics.Bitmap.Config.ARGB_8888),i=new android.graphics.Canvas(a),t=new android.graphics.Paint;return t.setColorFilter(new android.graphics.PorterDuffColorFilter(android.graphics.Color.rgb(r[0],r[1],r[2]),android.graphics.PorterDuff.Mode.MULTIPLY)),i.drawBitmap(e,0,0,t),a}function i(e){return e.path.startsWith(__dir__)?e:{name:e.name,path:__dir__+"/"+e.path,color:e.color}}function t(r,i){var t;if(!e.debugMode&&FileTools.isExists(""+r.result.path+r.result.name+".png"))return Logger.Log("File with the path, given in method 'TextureWorker.createTextureWithOverlays', already exists, texture generation process cancelled","TextureWorker DEBUG");var o=android.graphics.Bitmap.createBitmap(r.bitmap.width,r.bitmap.height,null!==(t=r.bitmap.config)&&void 0!==t?t:android.graphics.Bitmap.Config.ARGB_8888),n=new android.graphics.Canvas(o);for(var s in r.overlays){var d=r.overlays[s],g=FileTools.ReadImage(""+d.path+d.name+".png");n.drawBitmap(d.color?a(g,d.color):g,0,0,null)}return FileTools.WriteImage(""+r.result.path+r.result.name+".png",o),i?o:void 0}function o(r,i){var t;if(!e.debugMode&&FileTools.isExists(""+r.result.path+r.result.name+".png"))return Logger.Log("File with the path, given in method 'TextureWorker.paintTexture', already exists, texture generation process cancelled","TextureWorker DEBUG");var o=android.graphics.Bitmap.createBitmap(r.bitmap.width,r.bitmap.height,null!==(t=r.bitmap.config)&&void 0!==t?t:android.graphics.Bitmap.Config.ARGB_8888),n=new android.graphics.Canvas(o);return n.drawBitmap(a(FileTools.ReadImage(""+r.src.path+r.src.name+".png"),r.color),0,0,null),FileTools.WriteImage(""+r.result.path+r.result.name+".png",o),i?o:void 0}function n(r,a,i){if(!e.debugMode&&FileTools.isExists(""+a.path+a.name+".png"))return Logger.Log("File with the path, given in method 'TextureWorker.grayscaleImage' already exists, texture generation process cancelled","TextureWorker DEBUG");var t=FileTools.ReadImage(""+r.path+r.name+".png"),o=android.graphics.Bitmap.createBitmap(t.getWidth(),t.getHeight(),android.graphics.Bitmap.Config.ARGB_8888),n=new android.graphics.Canvas(o),s=new android.graphics.Paint,d=new android.graphics.ColorMatrix;return d.setSaturation(0),s.setColorFilter(new android.graphics.ColorMatrixColorFilter(d)),n.drawBitmap(t,0,0,s),FileTools.WriteImage(""+a.path+a.name+".png",o),i?o:void 0}function s(e,r){for(var a in e.result=i(e.result),e.overlays)e.overlays[a]=i(e.overlays[a]);return t(e,r)}function d(e,r){return e.src=i(e.src),e.result=i(e.result),o(e,r)}function g(e,r,a){return e=i(e),r=i(r),n(e,r,a)}e.debugMode=!1,e.toggleDebugMode=r,e.fromModDir=i;
let TextureSource = WRAP_JAVA("com.zhekasmirnov.innercore.api.mod.ui.TextureSource").instance;
function pizdes(r) { 
    var t; 
    var o = android.graphics.Bitmap.createBitmap(r.bitmap.width, r.bitmap.height, android.graphics.Bitmap.Config.ARGB_8888);
    var n = new android.graphics.Canvas(o); 
    for (var s in r.overlays) { 
        var d = r.overlays[s]
        var g = TextureSource.get(d.bitmap); 
        n.drawBitmap(d.color ? a(g, d.color) : g, 0, 0, null) 
    } 
    return o;
}
e._createTextureWithOverlays=pizdes,e.TEXTURE_STANDART={width:16,height:16,config:android.graphics.Bitmap.Config.ARGB_8888},e.createTextureWithOverlays=t,e.paintTexture=o,e.grayscaleImage=n,e.createTextureWithOverlaysModDir=s,e.paintTextureModDir=d,e.grayscaleImageModDir=g}(TextureWorker||(TextureWorker={})),EXPORT("TextureWorker",TextureWorker);